<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css">
</head>
<body>
    <div class="container">
        <h1>Welcome, <span id="username"><%= user ? user.name : '' %></span>!</h1>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', async function() {
           const User = sessionStorage.getItem('User.email');
           console.log(User)
//             fetch('/Healtify/dashboard', {
//     method: 'POST', // Ensure this matches your backend route's expected method
//     headers: {
//         'Content-Type': 'application/json',
//         'Authorization': `Bearer ${user.token}`
//     },
//     body: JSON.stringify({ /* data to send */ }) // Include data in body if needed
// })
// .then(response => response.json())
// .then(data => console.log(data))
// .catch(error => console.error('Error:', error));
            // const user = <%- JSON.stringify(user || {}) %>; // Inject user object directly from the server
            // console.log(user.token);

            // if (user) {
            //     try {
            //         const response = await fetch('/Healtify/dashboard', {
            //             headers: {
            //                 'Content-Type': 'application/json',
            //                 'Authorization': `Bearer ${user.token}`
            //             }
            //         });

            //         if (response.ok) {
            //             const data = await response.json();
            //             console.log('Dashboard data:', data);
            //             // Use the data to update the page as needed
            //         } else {
            //             console.log('Error fetching dashboard:', response.statusText);
            //             // Handle error, e.g., show a message to the user
            //         }
            //     } catch (error) {
            //         console.error('Error fetching dashboard:', error);
            //         // Handle error, e.g., show a message to the user
            //     }
            // } else {
            //     console.log('Token missing');
            //     window.location.href = '/Healtify/login';
            // }
        });
    </script>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
